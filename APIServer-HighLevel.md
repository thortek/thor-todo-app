# API Server Implementation Guide
## 3-Week Plan: Express → Prisma → SQLite

---

## **Week 1: Express API Server**

### Overview
Build a RESTful API server using Express.js that serves the same todo functionality currently in `todoModel.ts`.

### High-Level Steps
1. **Project Setup**
   - Install Express and TypeScript dependencies
   - Configure TypeScript for Node.js/Express
   - Set up project structure (separate frontend and backend)

2. **Create Express Server**
   - Initialize Express app
   - Configure middleware (body-parser, CORS, error handling)
   - Set up port and basic server configuration

3. **Define API Routes**
   - `GET /api/todos` - Get all todos
   - `POST /api/todos` - Create a new todo
   - `PUT /api/todos/:id` - Update a todo
   - `DELETE /api/todos/:id` - Delete a todo
   - `DELETE /api/todos/completed` - Clear completed todos
   - `GET /api/categories` - Get all categories
   - `POST /api/categories` - Create a new category
   - `DELETE /api/categories/:id` - Delete a category

4. **Implement Controllers**
   - Convert todoModel functions to API endpoints
   - Use in-memory storage initially (same as current store)
   - Return proper HTTP status codes and JSON responses

5. **Update Frontend**
   - Replace direct todoModel calls with fetch/axios API calls
   - Handle async operations
   - Add error handling for network requests

6. **Testing**
   - Test endpoints with Postman or similar tool
   - Verify frontend integration

---

## **Week 2: Prisma ORM Integration**

### Overview
Replace in-memory storage with Prisma ORM, which will generate TypeScript-safe database clients.

### High-Level Steps
1. **Install and Initialize Prisma**
   - Install Prisma CLI and client
   - Run `npx prisma init`
   - Configure Prisma for SQLite (preparing for Week 3)

2. **Define Prisma Schema**
   - Create `schema.prisma` file
   - Define Todo and Category models matching current interfaces
   - Set up relationships between models

3. **Generate Prisma Client**
   - Run `npx prisma generate`
   - Explore TypeScript types generated by Prisma

4. **Update API Controllers**
   - Replace in-memory store with Prisma client calls
   - Update CRUD operations to use Prisma queries
   - Leverage Prisma's type safety

5. **Handle Data Migrations**
   - Learn Prisma migration commands
   - Create initial migration
   - Understand migration workflow

6. **Testing**
   - Verify all endpoints still work
   - Test data persistence across server restarts

---

## **Week 3: SQLite Database Integration**

### Overview
Connect Prisma to a SQLite database for true data persistence.

### High-Level Steps
1. **Configure SQLite Connection**
   - Update `schema.prisma` datasource for SQLite
   - Set database file location

2. **Run Database Migration**
   - Execute `npx prisma migrate dev`
   - Create actual database file
   - Seed initial data

3. **Implement Seed Script**
   - Create `prisma/seed.ts`
   - Populate database with initial categories and todos
   - Configure seed script in package.json

4. **Database Management**
   - Learn to use Prisma Studio (`npx prisma studio`)
   - View and edit data visually
   - Understand database file structure

5. **Advanced Queries**
   - Implement filtering (by category, status, date range)
   - Add sorting capabilities
   - Implement pagination (optional)

6. **Production Considerations**
   - Environment variables for database configuration
   - Error handling for database connection issues
   - Backup strategies

---

## **Key Learning Outcomes**

### Week 1
- RESTful API design principles
- Express.js routing and middleware
- Separation of frontend and backend
- HTTP methods and status codes

### Week 2
- ORM concepts and benefits
- Type-safe database queries
- Schema-first development
- Database migrations

### Week 3
- Relational database fundamentals
- Data persistence
- Database seeding
- Development vs. production databases

---

## **Prerequisites**
- Node.js and npm installed
- Basic TypeScript knowledge
- Understanding of current todoModel.ts implementation
- Git for version control

---

## **Tools & Technologies**
- **Express.js**: Web framework for Node.js
- **Prisma**: Next-generation ORM with TypeScript support
- **SQLite**: Lightweight, file-based SQL database
- **TypeScript**: Type-safe JavaScript
- **Postman/Thunder Client**: API testing tools

---

## **Next Steps**
This outline provides the roadmap. Each week will have detailed implementation instructions including:
- Complete code examples
- Step-by-step commands
- Common pitfalls and solutions
- Testing strategies
- Best practices